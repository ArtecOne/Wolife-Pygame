import os , sys , csv
from pathfinding.core.grid import Grid
from pathfinding.finder.a_star import AStarFinder
import numpy as np

def resource_path(relative_path) -> str: 
    """ Get absolute path to resource, works for dev and for PyInstaller """
    try:
        # PyInstaller creates a temp folder and stores path in _MEIPASS
        base_path = sys._MEIPASS
    except Exception:
        base_path = os.path.abspath(".")

    return os.path.join(base_path, relative_path)

MAPA = {
    "suelo" : resource_path("assets\\tmx\\casa_vacia_suelo.csv") ,
    "muros" : resource_path("assets\\tmx\\casa_vacia_muros.csv") ,
    "sprites" : resource_path("assets\\img\\tiles\\Room_Builder_free_32x32.png")
}

MAPA_MATRIX = np.asarray([[50,290,290,290,290,290,290,290,290,15,290,290,290,290,290,290,290,290,290,14],
               [32,307,307,307,307,307,307,307,307,32,307,307,307,307,307,307,307,307,307,32],
               [32,-1,-1,-1,-1,-1,-1,-1,-1,32,-1,-1,-1,-1,-1,-1,-1,-1,-1,                 32],
               [32,-1,-1,-1,-1,-1,-1,-1,-1,32,-1,-1,-1,-1,-1,-1,-1,-1,-1,                 32],
               [32,-1,-1,-1,-1,-1,-1,-1,-1,32,-1,-1,-1,-1,-1,-1,-1,-1,-1,                 32],
               [32,-1,-1,-1,-1,-1,-1,-1,-1,32,-1,-1,-1,-1,-1,-1,-1,-1,-1,                 32],
               [32,-1,-1,-1,16,290,290,290,290,297,290,290,290,290,290,291,-1,-1,-1,      32],
               [32,-1,-1,-1,32,314,314,314,314,314,314,314,314,314,314,315,-1,-1,-1,      32],
               [32,-1,-1,-1,32,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,                 32],
               [32,-1,-1,-1,32,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,                 32],
               [32,-1,-1,-1,32,-1,-1,-1,-1,-1,-1,-1,-1,16,290,290,290,290,290,            32],
               [32,-1,-1,-1,32,-1,-1,-1,-1,-1,-1,-1,-1,32,307,307,307,307,307,            32],
               [32,-1,-1,-1,292,-1,-1,-1,-1,-1,-1,-1,-1,292,-1,-1,-1,-1,-1,               32],
               [32,-1,-1,-1,309,-1,-1,-1,-1,-1,-1,-1,-1,309,-1,-1,-1,-1,-1,               32],
               [32,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,                 32],
               [32,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,                 32],
               [296,290,290,290,290,290,290,30,-1,-1,-1,-1,28,290,290,290,290,290,290,   298],
               [306,307,307,307,307,307,307,47,-1,-1,-1,-1,45,307,307,307,307,307,307,   308],
               [-1,-1,-1,-1,-1,-1,-1,47,-1,-1,-1,-1,45,-1,-1,-1,-1,-1,-1,                 -1],
               [-1,-1,-1,-1,-1,-1,-1,289,291,-1,-1,289,291,-1,-1,-1,-1,-1,-1,             -1]])